{"ast":null,"code":"/* @preserve\n* @terraformer/arcgis - v2.0.1 - MIT\n* Copyright (c) 2012-2020 Environmental Systems Research Institute, Inc.\n* Thu Apr 16 2020 00:19:41 GMT-0700 (Pacific Daylight Time)\n*/\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nconst edgeIntersectsEdge = (a1, a2, b1, b2) => {\n  var uaT = (b2[0] - b1[0]) * (a1[1] - b1[1]) - (b2[1] - b1[1]) * (a1[0] - b1[0]);\n  var ubT = (a2[0] - a1[0]) * (a1[1] - b1[1]) - (a2[1] - a1[1]) * (a1[0] - b1[0]);\n  var uB = (b2[1] - b1[1]) * (a2[0] - a1[0]) - (b2[0] - b1[0]) * (a2[1] - a1[1]);\n\n  if (uB !== 0) {\n    var ua = uaT / uB;\n    var ub = ubT / uB;\n\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst coordinatesContainPoint = (coordinates, point) => {\n  let contains = false;\n\n  for (let i = -1, l = coordinates.length, j = l - 1; ++i < l; j = i) {\n    if ((coordinates[i][1] <= point[1] && point[1] < coordinates[j][1] || coordinates[j][1] <= point[1] && point[1] < coordinates[i][1]) && point[0] < (coordinates[j][0] - coordinates[i][0]) * (point[1] - coordinates[i][1]) / (coordinates[j][1] - coordinates[i][1]) + coordinates[i][0]) {\n      contains = !contains;\n    }\n  }\n\n  return contains;\n};\n\nconst pointsEqual = (a, b) => {\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst arrayIntersectsArray = (a, b) => {\n  for (let i = 0; i < a.length - 1; i++) {\n    for (let j = 0; j < b.length - 1; j++) {\n      if (edgeIntersectsEdge(a[i], a[i + 1], b[j], b[j + 1])) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n// checks if the first and last points of a ring are equal and closes the ring\n\n\nconst closeRing = coordinates => {\n  if (!pointsEqual(coordinates[0], coordinates[coordinates.length - 1])) {\n    coordinates.push(coordinates[0]);\n  }\n\n  return coordinates;\n}; // determine if polygon ring coordinates are clockwise. clockwise signifies outer ring, counter-clockwise an inner ring\n// or hole. this logic was found at http://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-\n// points-are-in-clockwise-order\n\n\nconst ringIsClockwise = ringToTest => {\n  var total = 0;\n  var i = 0;\n  var rLength = ringToTest.length;\n  var pt1 = ringToTest[i];\n  var pt2;\n\n  for (i; i < rLength - 1; i++) {\n    pt2 = ringToTest[i + 1];\n    total += (pt2[0] - pt1[0]) * (pt2[1] + pt1[1]);\n    pt1 = pt2;\n  }\n\n  return total >= 0;\n}; // shallow object clone for feature properties and attributes\n// from http://jsperf.com/cloning-an-object/2\n\n\nconst shallowClone = obj => {\n  var target = {};\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      target[i] = obj[i];\n    }\n  }\n\n  return target;\n};\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\n\nconst coordinatesContainCoordinates = (outer, inner) => {\n  var intersects = arrayIntersectsArray(outer, inner);\n  var contains = coordinatesContainPoint(outer, inner[0]);\n\n  if (!intersects && contains) {\n    return true;\n  }\n\n  return false;\n}; // do any polygons in this array contain any other polygons in this array?\n// used for checking for holes in arcgis rings\n\n\nconst convertRingsToGeoJSON = rings => {\n  var outerRings = [];\n  var holes = [];\n  var x; // iterator\n\n  var outerRing; // current outer ring being evaluated\n\n  var hole; // current hole being evaluated\n  // for each ring\n\n  for (var r = 0; r < rings.length; r++) {\n    var ring = closeRing(rings[r].slice(0));\n\n    if (ring.length < 4) {\n      continue;\n    } // is this ring an outer ring? is it clockwise?\n\n\n    if (ringIsClockwise(ring)) {\n      var polygon = [ring.slice().reverse()]; // wind outer rings counterclockwise for RFC 7946 compliance\n\n      outerRings.push(polygon); // push to outer rings\n    } else {\n      holes.push(ring.slice().reverse()); // wind inner rings clockwise for RFC 7946 compliance\n    }\n  }\n\n  var uncontainedHoles = []; // while there are holes left...\n\n  while (holes.length) {\n    // pop a hole off out stack\n    hole = holes.pop(); // loop over all outer rings and see if they contain our hole.\n\n    var contained = false;\n\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n\n      if (coordinatesContainCoordinates(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        contained = true;\n        break;\n      }\n    } // ring is not contained in any outer ring\n    // sometimes this happens https://github.com/Esri/esri-leaflet/issues/320\n\n\n    if (!contained) {\n      uncontainedHoles.push(hole);\n    }\n  } // if we couldn't match any holes using contains we can try intersects...\n\n\n  while (uncontainedHoles.length) {\n    // pop a hole off out stack\n    hole = uncontainedHoles.pop(); // loop over all outer rings and see if any intersect our hole.\n\n    var intersects = false;\n\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n\n      if (arrayIntersectsArray(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        intersects = true;\n        break;\n      }\n    }\n\n    if (!intersects) {\n      outerRings.push([hole.reverse()]);\n    }\n  }\n\n  if (outerRings.length === 1) {\n    return {\n      type: 'Polygon',\n      coordinates: outerRings[0]\n    };\n  } else {\n    return {\n      type: 'MultiPolygon',\n      coordinates: outerRings\n    };\n  }\n};\n\nconst getId = (attributes, idAttribute) => {\n  var keys = idAttribute ? [idAttribute, 'OBJECTID', 'FID'] : ['OBJECTID', 'FID'];\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n\n    if (key in attributes && (typeof attributes[key] === 'string' || typeof attributes[key] === 'number')) {\n      return attributes[key];\n    }\n  }\n\n  throw Error('No valid id attribute found');\n};\n\nconst arcgisToGeoJSON = (arcgis, idAttribute) => {\n  var geojson = {};\n\n  if (arcgis.features) {\n    geojson.type = 'FeatureCollection';\n    geojson.features = [];\n\n    for (var i = 0; i < arcgis.features.length; i++) {\n      geojson.features.push(arcgisToGeoJSON(arcgis.features[i], idAttribute));\n    }\n  }\n\n  if (typeof arcgis.x === 'number' && typeof arcgis.y === 'number') {\n    geojson.type = 'Point';\n    geojson.coordinates = [arcgis.x, arcgis.y];\n\n    if (typeof arcgis.z === 'number') {\n      geojson.coordinates.push(arcgis.z);\n    }\n  }\n\n  if (arcgis.points) {\n    geojson.type = 'MultiPoint';\n    geojson.coordinates = arcgis.points.slice(0);\n  }\n\n  if (arcgis.paths) {\n    if (arcgis.paths.length === 1) {\n      geojson.type = 'LineString';\n      geojson.coordinates = arcgis.paths[0].slice(0);\n    } else {\n      geojson.type = 'MultiLineString';\n      geojson.coordinates = arcgis.paths.slice(0);\n    }\n  }\n\n  if (arcgis.rings) {\n    geojson = convertRingsToGeoJSON(arcgis.rings.slice(0));\n  }\n\n  if (typeof arcgis.xmin === 'number' && typeof arcgis.ymin === 'number' && typeof arcgis.xmax === 'number' && typeof arcgis.ymax === 'number') {\n    geojson.type = 'Polygon';\n    geojson.coordinates = [[[arcgis.xmax, arcgis.ymax], [arcgis.xmin, arcgis.ymax], [arcgis.xmin, arcgis.ymin], [arcgis.xmax, arcgis.ymin], [arcgis.xmax, arcgis.ymax]]];\n  }\n\n  if (arcgis.geometry || arcgis.attributes) {\n    geojson.type = 'Feature';\n    geojson.geometry = arcgis.geometry ? arcgisToGeoJSON(arcgis.geometry) : null;\n    geojson.properties = arcgis.attributes ? shallowClone(arcgis.attributes) : null;\n\n    if (arcgis.attributes) {\n      try {\n        geojson.id = getId(arcgis.attributes, idAttribute);\n      } catch (err) {// don't set an id\n      }\n    }\n  } // if no valid geometry was encountered\n\n\n  if (JSON.stringify(geojson.geometry) === JSON.stringify({})) {\n    geojson.geometry = null;\n  }\n\n  if (arcgis.spatialReference && arcgis.spatialReference.wkid && arcgis.spatialReference.wkid !== 4326) {\n    console.warn('Object converted in non-standard crs - ' + JSON.stringify(arcgis.spatialReference));\n  }\n\n  return geojson;\n};\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n// This function ensures that rings are oriented in the right directions\n// outer rings are clockwise, holes are counterclockwise\n// used for converting GeoJSON Polygons to ArcGIS Polygons\n\n\nconst orientRings = poly => {\n  var output = [];\n  var polygon = poly.slice(0);\n  var outerRing = closeRing(polygon.shift().slice(0));\n\n  if (outerRing.length >= 4) {\n    if (!ringIsClockwise(outerRing)) {\n      outerRing.reverse();\n    }\n\n    output.push(outerRing);\n\n    for (var i = 0; i < polygon.length; i++) {\n      var hole = closeRing(polygon[i].slice(0));\n\n      if (hole.length >= 4) {\n        if (ringIsClockwise(hole)) {\n          hole.reverse();\n        }\n\n        output.push(hole);\n      }\n    }\n  }\n\n  return output;\n}; // This function flattens holes in multipolygons to one array of polygons\n// used for converting GeoJSON Polygons to ArcGIS Polygons\n\n\nconst flattenMultiPolygonRings = rings => {\n  var output = [];\n\n  for (var i = 0; i < rings.length; i++) {\n    var polygon = orientRings(rings[i]);\n\n    for (var x = polygon.length - 1; x >= 0; x--) {\n      var ring = polygon[x].slice(0);\n      output.push(ring);\n    }\n  }\n\n  return output;\n};\n\nconst geojsonToArcGIS = (geojson, idAttribute) => {\n  idAttribute = idAttribute || 'OBJECTID';\n  var spatialReference = {\n    wkid: 4326\n  };\n  var result = {};\n  var i;\n\n  switch (geojson.type) {\n    case 'Point':\n      result.x = geojson.coordinates[0];\n      result.y = geojson.coordinates[1];\n      result.spatialReference = spatialReference;\n      break;\n\n    case 'MultiPoint':\n      result.points = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n\n    case 'LineString':\n      result.paths = [geojson.coordinates.slice(0)];\n      result.spatialReference = spatialReference;\n      break;\n\n    case 'MultiLineString':\n      result.paths = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n\n    case 'Polygon':\n      result.rings = orientRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n\n    case 'MultiPolygon':\n      result.rings = flattenMultiPolygonRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n\n    case 'Feature':\n      if (geojson.geometry) {\n        result.geometry = geojsonToArcGIS(geojson.geometry, idAttribute);\n      }\n\n      result.attributes = geojson.properties ? shallowClone(geojson.properties) : {};\n\n      if (geojson.id) {\n        result.attributes[idAttribute] = geojson.id;\n      }\n\n      break;\n\n    case 'FeatureCollection':\n      result = [];\n\n      for (i = 0; i < geojson.features.length; i++) {\n        result.push(geojsonToArcGIS(geojson.features[i], idAttribute));\n      }\n\n      break;\n\n    case 'GeometryCollection':\n      result = [];\n\n      for (i = 0; i < geojson.geometries.length; i++) {\n        result.push(geojsonToArcGIS(geojson.geometries[i], idAttribute));\n      }\n\n      break;\n  }\n\n  return result;\n};\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\n\nexport { arcgisToGeoJSON, geojsonToArcGIS };","map":{"version":3,"sources":["C:/Users/incluit/Desktop/projects/smartHuerta-FE/egghead-code-examples/add-placename-location-search-to-react-leaflet-esri-leaflet-geocoder/node_modules/@terraformer/arcgis/dist/t-arcgis.esm.js"],"names":["edgeIntersectsEdge","a1","a2","b1","b2","uaT","ubT","uB","ua","ub","coordinatesContainPoint","coordinates","point","contains","i","l","length","j","pointsEqual","a","b","arrayIntersectsArray","closeRing","push","ringIsClockwise","ringToTest","total","rLength","pt1","pt2","shallowClone","obj","target","hasOwnProperty","coordinatesContainCoordinates","outer","inner","intersects","convertRingsToGeoJSON","rings","outerRings","holes","x","outerRing","hole","r","ring","slice","polygon","reverse","uncontainedHoles","pop","contained","type","getId","attributes","idAttribute","keys","key","Error","arcgisToGeoJSON","arcgis","geojson","features","y","z","points","paths","xmin","ymin","xmax","ymax","geometry","properties","id","err","JSON","stringify","spatialReference","wkid","console","warn","orientRings","poly","output","shift","flattenMultiPolygonRings","geojsonToArcGIS","result","geometries"],"mappings":"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","sourcesContent":["/* @preserve\n* @terraformer/arcgis - v2.0.1 - MIT\n* Copyright (c) 2012-2020 Environmental Systems Research Institute, Inc.\n* Thu Apr 16 2020 00:19:41 GMT-0700 (Pacific Daylight Time)\n*/\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nconst edgeIntersectsEdge = (a1, a2, b1, b2) => {\n  var uaT = (b2[0] - b1[0]) * (a1[1] - b1[1]) - (b2[1] - b1[1]) * (a1[0] - b1[0]);\n  var ubT = (a2[0] - a1[0]) * (a1[1] - b1[1]) - (a2[1] - a1[1]) * (a1[0] - b1[0]);\n  var uB = (b2[1] - b1[1]) * (a2[0] - a1[0]) - (b2[0] - b1[0]) * (a2[1] - a1[1]);\n\n  if (uB !== 0) {\n    var ua = uaT / uB;\n    var ub = ubT / uB;\n\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst coordinatesContainPoint = (coordinates, point) => {\n  let contains = false;\n  for (let i = -1, l = coordinates.length, j = l - 1; ++i < l; j = i) {\n    if (((coordinates[i][1] <= point[1] && point[1] < coordinates[j][1]) ||\n         (coordinates[j][1] <= point[1] && point[1] < coordinates[i][1])) &&\n        (point[0] < (coordinates[j][0] - coordinates[i][0]) * (point[1] - coordinates[i][1]) / (coordinates[j][1] - coordinates[i][1]) + coordinates[i][0])) {\n      contains = !contains;\n    }\n  }\n  return contains;\n};\n\nconst pointsEqual = (a, b) => {\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst arrayIntersectsArray = (a, b) => {\n  for (let i = 0; i < a.length - 1; i++) {\n    for (let j = 0; j < b.length - 1; j++) {\n      if (edgeIntersectsEdge(a[i], a[i + 1], b[j], b[j + 1])) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\n// checks if the first and last points of a ring are equal and closes the ring\nconst closeRing = (coordinates) => {\n  if (!pointsEqual(coordinates[0], coordinates[coordinates.length - 1])) {\n    coordinates.push(coordinates[0]);\n  }\n  return coordinates;\n};\n\n// determine if polygon ring coordinates are clockwise. clockwise signifies outer ring, counter-clockwise an inner ring\n// or hole. this logic was found at http://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-\n// points-are-in-clockwise-order\nconst ringIsClockwise = (ringToTest) => {\n  var total = 0;\n  var i = 0;\n  var rLength = ringToTest.length;\n  var pt1 = ringToTest[i];\n  var pt2;\n  for (i; i < rLength - 1; i++) {\n    pt2 = ringToTest[i + 1];\n    total += (pt2[0] - pt1[0]) * (pt2[1] + pt1[1]);\n    pt1 = pt2;\n  }\n  return (total >= 0);\n};\n\n// shallow object clone for feature properties and attributes\n// from http://jsperf.com/cloning-an-object/2\nconst shallowClone = (obj) => {\n  var target = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      target[i] = obj[i];\n    }\n  }\n  return target;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nconst coordinatesContainCoordinates = (outer, inner) => {\n  var intersects = arrayIntersectsArray(outer, inner);\n  var contains = coordinatesContainPoint(outer, inner[0]);\n  if (!intersects && contains) {\n    return true;\n  }\n  return false;\n};\n\n// do any polygons in this array contain any other polygons in this array?\n// used for checking for holes in arcgis rings\nconst convertRingsToGeoJSON = (rings) => {\n  var outerRings = [];\n  var holes = [];\n  var x; // iterator\n  var outerRing; // current outer ring being evaluated\n  var hole; // current hole being evaluated\n\n  // for each ring\n  for (var r = 0; r < rings.length; r++) {\n    var ring = closeRing(rings[r].slice(0));\n    if (ring.length < 4) {\n      continue;\n    }\n    // is this ring an outer ring? is it clockwise?\n    if (ringIsClockwise(ring)) {\n      var polygon = [ ring.slice().reverse() ]; // wind outer rings counterclockwise for RFC 7946 compliance\n      outerRings.push(polygon); // push to outer rings\n    } else {\n      holes.push(ring.slice().reverse()); // wind inner rings clockwise for RFC 7946 compliance\n    }\n  }\n\n  var uncontainedHoles = [];\n\n  // while there are holes left...\n  while (holes.length) {\n    // pop a hole off out stack\n    hole = holes.pop();\n\n    // loop over all outer rings and see if they contain our hole.\n    var contained = false;\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n      if (coordinatesContainCoordinates(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        contained = true;\n        break;\n      }\n    }\n\n    // ring is not contained in any outer ring\n    // sometimes this happens https://github.com/Esri/esri-leaflet/issues/320\n    if (!contained) {\n      uncontainedHoles.push(hole);\n    }\n  }\n\n  // if we couldn't match any holes using contains we can try intersects...\n  while (uncontainedHoles.length) {\n    // pop a hole off out stack\n    hole = uncontainedHoles.pop();\n\n    // loop over all outer rings and see if any intersect our hole.\n    var intersects = false;\n\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n      if (arrayIntersectsArray(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        intersects = true;\n        break;\n      }\n    }\n\n    if (!intersects) {\n      outerRings.push([hole.reverse()]);\n    }\n  }\n\n  if (outerRings.length === 1) {\n    return {\n      type: 'Polygon',\n      coordinates: outerRings[0]\n    };\n  } else {\n    return {\n      type: 'MultiPolygon',\n      coordinates: outerRings\n    };\n  }\n};\n\nconst getId = (attributes, idAttribute) => {\n  var keys = idAttribute ? [idAttribute, 'OBJECTID', 'FID'] : ['OBJECTID', 'FID'];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (\n      key in attributes &&\n      (typeof attributes[key] === 'string' ||\n        typeof attributes[key] === 'number')\n    ) {\n      return attributes[key];\n    }\n  }\n  throw Error('No valid id attribute found');\n};\n\nconst arcgisToGeoJSON = (arcgis, idAttribute) => {\n  var geojson = {};\n\n  if (arcgis.features) {\n    geojson.type = 'FeatureCollection';\n    geojson.features = [];\n    for (var i = 0; i < arcgis.features.length; i++) {\n      geojson.features.push(arcgisToGeoJSON(arcgis.features[i], idAttribute));\n    }\n  }\n\n  if (typeof arcgis.x === 'number' && typeof arcgis.y === 'number') {\n    geojson.type = 'Point';\n    geojson.coordinates = [arcgis.x, arcgis.y];\n    if (typeof arcgis.z === 'number') {\n      geojson.coordinates.push(arcgis.z);\n    }\n  }\n\n  if (arcgis.points) {\n    geojson.type = 'MultiPoint';\n    geojson.coordinates = arcgis.points.slice(0);\n  }\n\n  if (arcgis.paths) {\n    if (arcgis.paths.length === 1) {\n      geojson.type = 'LineString';\n      geojson.coordinates = arcgis.paths[0].slice(0);\n    } else {\n      geojson.type = 'MultiLineString';\n      geojson.coordinates = arcgis.paths.slice(0);\n    }\n  }\n\n  if (arcgis.rings) {\n    geojson = convertRingsToGeoJSON(arcgis.rings.slice(0));\n  }\n\n  if (\n    typeof arcgis.xmin === 'number' &&\n    typeof arcgis.ymin === 'number' &&\n    typeof arcgis.xmax === 'number' &&\n    typeof arcgis.ymax === 'number'\n  ) {\n    geojson.type = 'Polygon';\n    geojson.coordinates = [[\n      [arcgis.xmax, arcgis.ymax],\n      [arcgis.xmin, arcgis.ymax],\n      [arcgis.xmin, arcgis.ymin],\n      [arcgis.xmax, arcgis.ymin],\n      [arcgis.xmax, arcgis.ymax]\n    ]];\n  }\n\n  if (arcgis.geometry || arcgis.attributes) {\n    geojson.type = 'Feature';\n    geojson.geometry = (arcgis.geometry) ? arcgisToGeoJSON(arcgis.geometry) : null;\n    geojson.properties = (arcgis.attributes) ? shallowClone(arcgis.attributes) : null;\n    if (arcgis.attributes) {\n      try {\n        geojson.id = getId(arcgis.attributes, idAttribute);\n      } catch (err) {\n        // don't set an id\n      }\n    }\n  }\n\n  // if no valid geometry was encountered\n  if (JSON.stringify(geojson.geometry) === JSON.stringify({})) {\n    geojson.geometry = null;\n  }\n\n  if (\n    arcgis.spatialReference &&\n    arcgis.spatialReference.wkid &&\n    arcgis.spatialReference.wkid !== 4326\n  ) {\n    console.warn('Object converted in non-standard crs - ' + JSON.stringify(arcgis.spatialReference));\n  }\n\n  return geojson;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\n// This function ensures that rings are oriented in the right directions\n// outer rings are clockwise, holes are counterclockwise\n// used for converting GeoJSON Polygons to ArcGIS Polygons\nconst orientRings = (poly) => {\n  var output = [];\n  var polygon = poly.slice(0);\n  var outerRing = closeRing(polygon.shift().slice(0));\n  if (outerRing.length >= 4) {\n    if (!ringIsClockwise(outerRing)) {\n      outerRing.reverse();\n    }\n\n    output.push(outerRing);\n\n    for (var i = 0; i < polygon.length; i++) {\n      var hole = closeRing(polygon[i].slice(0));\n      if (hole.length >= 4) {\n        if (ringIsClockwise(hole)) {\n          hole.reverse();\n        }\n        output.push(hole);\n      }\n    }\n  }\n\n  return output;\n};\n\n// This function flattens holes in multipolygons to one array of polygons\n// used for converting GeoJSON Polygons to ArcGIS Polygons\nconst flattenMultiPolygonRings = (rings) => {\n  var output = [];\n  for (var i = 0; i < rings.length; i++) {\n    var polygon = orientRings(rings[i]);\n    for (var x = polygon.length - 1; x >= 0; x--) {\n      var ring = polygon[x].slice(0);\n      output.push(ring);\n    }\n  }\n  return output;\n};\n\nconst geojsonToArcGIS = (geojson, idAttribute) => {\n  idAttribute = idAttribute || 'OBJECTID';\n  var spatialReference = { wkid: 4326 };\n  var result = {};\n  var i;\n\n  switch (geojson.type) {\n    case 'Point':\n      result.x = geojson.coordinates[0];\n      result.y = geojson.coordinates[1];\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiPoint':\n      result.points = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n    case 'LineString':\n      result.paths = [geojson.coordinates.slice(0)];\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiLineString':\n      result.paths = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n    case 'Polygon':\n      result.rings = orientRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiPolygon':\n      result.rings = flattenMultiPolygonRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n    case 'Feature':\n      if (geojson.geometry) {\n        result.geometry = geojsonToArcGIS(geojson.geometry, idAttribute);\n      }\n      result.attributes = (geojson.properties) ? shallowClone(geojson.properties) : {};\n      if (geojson.id) {\n        result.attributes[idAttribute] = geojson.id;\n      }\n      break;\n    case 'FeatureCollection':\n      result = [];\n      for (i = 0; i < geojson.features.length; i++) {\n        result.push(geojsonToArcGIS(geojson.features[i], idAttribute));\n      }\n      break;\n    case 'GeometryCollection':\n      result = [];\n      for (i = 0; i < geojson.geometries.length; i++) {\n        result.push(geojsonToArcGIS(geojson.geometries[i], idAttribute));\n      }\n      break;\n  }\n\n  return result;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nexport { arcgisToGeoJSON, geojsonToArcGIS };\n"]},"metadata":{},"sourceType":"module"}